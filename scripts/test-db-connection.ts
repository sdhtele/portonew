import { db } from \"@/db\";\n\nasync function testDatabaseConnection() {\n  console.log(\"🔍 Testing database connection...\");\n  \n  try {\n    // Try a simple query to test the connection\n    console.log(\"📡 Attempting to connect to database...\");\n    const result = await db.execute(\"SELECT 1 as connected\");\n    \n    console.log(\"✅ Database connection successful!\");\n    console.log(\"📊 Test query result:\", result.rows);\n    \n    // Try to fetch user table structure\n    console.log(\"\\n📋 Checking user table...\");\n    const userTable = await db.execute(`\n      SELECT column_name, data_type \n      FROM information_schema.columns \n      WHERE table_name = 'user' \n      ORDER BY ordinal_position\n    `);\n    \n    if (userTable.rows.length > 0) {\n      console.log(\"✅ User table exists with columns:\");\n      userTable.rows.forEach((row: any) => {\n        console.log(`   • ${row.column_name} (${row.data_type})`);\n      });\n    } else {\n      console.log(\"⚠️  User table does not exist yet. Run 'npm run db:push' to create it.\");\n    }\n    \n    console.log(\"\\n🎉 All tests passed! Your database is ready to use.\");\n    process.exit(0);\n    \n  } catch (error: any) {\n    console.log(\"❌ Database connection failed!\");\n    console.log(\"💬 Error message:\", error.message);\n    \n    if (error.message.includes(\"connect ECONNREFUSED\")) {\n      console.log(\"\\n🔧 Troubleshooting steps:\");\n      console.log(\"1. 🔌 Make sure your database is running\");\n      console.log(\"   - Using Docker: npm run db:up\");\n      console.log(\"   - Using local PostgreSQL: Start the PostgreSQL service\");\n      console.log(\"2. 📋 Check your .env file for correct DATABASE_URL\");\n      console.log(\"3. 🔐 Verify the database credentials (username/password)\");\n      console.log(\"4. 🚪 Check if the database port is correct (default: 5432 for local, 5433 with Docker)\");\n      console.log(\"5. 🔥 Check if your firewall is blocking the connection\");\n    } else if (error.message.includes(\"password authentication failed\")) {\n      console.log(\"\\n🔑 Authentication failed!\");\n      console.log(\"🔧 Check your database credentials in the .env file\");\n      console.log(\"📝 Make sure POSTGRES_USER and POSTGRES_PASSWORD match your database setup\");\n    } else if (error.message.includes(\"database\") && error.message.includes(\"does not exist\")) {\n      console.log(\"\\n🗄️ Database does not exist!\");\n      console.log(\"🔧 Run 'npm run db:push' to create the database schema\");\n    }\n    \n    console.log(\"\\n📖 For detailed setup instructions, check DATABASE_SETUP_GUIDE.md\");\n    process.exit(1);\n  }\n}\n\ntestDatabaseConnection();