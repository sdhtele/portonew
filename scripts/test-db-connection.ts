import { db } from \"@/db\";\n\nasync function testDatabaseConnection() {\n  console.log(\"ğŸ” Testing database connection...\");\n  \n  try {\n    // Try a simple query to test the connection\n    console.log(\"ğŸ“¡ Attempting to connect to database...\");\n    const result = await db.execute(\"SELECT 1 as connected\");\n    \n    console.log(\"âœ… Database connection successful!\");\n    console.log(\"ğŸ“Š Test query result:\", result.rows);\n    \n    // Try to fetch user table structure\n    console.log(\"\\nğŸ“‹ Checking user table...\");\n    const userTable = await db.execute(`\n      SELECT column_name, data_type \n      FROM information_schema.columns \n      WHERE table_name = 'user' \n      ORDER BY ordinal_position\n    `);\n    \n    if (userTable.rows.length > 0) {\n      console.log(\"âœ… User table exists with columns:\");\n      userTable.rows.forEach((row: any) => {\n        console.log(`   â€¢ ${row.column_name} (${row.data_type})`);\n      });\n    } else {\n      console.log(\"âš ï¸  User table does not exist yet. Run 'npm run db:push' to create it.\");\n    }\n    \n    console.log(\"\\nğŸ‰ All tests passed! Your database is ready to use.\");\n    process.exit(0);\n    \n  } catch (error: any) {\n    console.log(\"âŒ Database connection failed!\");\n    console.log(\"ğŸ’¬ Error message:\", error.message);\n    \n    if (error.message.includes(\"connect ECONNREFUSED\")) {\n      console.log(\"\\nğŸ”§ Troubleshooting steps:\");\n      console.log(\"1. ğŸ”Œ Make sure your database is running\");\n      console.log(\"   - Using Docker: npm run db:up\");\n      console.log(\"   - Using local PostgreSQL: Start the PostgreSQL service\");\n      console.log(\"2. ğŸ“‹ Check your .env file for correct DATABASE_URL\");\n      console.log(\"3. ğŸ” Verify the database credentials (username/password)\");\n      console.log(\"4. ğŸšª Check if the database port is correct (default: 5432 for local, 5433 with Docker)\");\n      console.log(\"5. ğŸ”¥ Check if your firewall is blocking the connection\");\n    } else if (error.message.includes(\"password authentication failed\")) {\n      console.log(\"\\nğŸ”‘ Authentication failed!\");\n      console.log(\"ğŸ”§ Check your database credentials in the .env file\");\n      console.log(\"ğŸ“ Make sure POSTGRES_USER and POSTGRES_PASSWORD match your database setup\");\n    } else if (error.message.includes(\"database\") && error.message.includes(\"does not exist\")) {\n      console.log(\"\\nğŸ—„ï¸ Database does not exist!\");\n      console.log(\"ğŸ”§ Run 'npm run db:push' to create the database schema\");\n    }\n    \n    console.log(\"\\nğŸ“– For detailed setup instructions, check DATABASE_SETUP_GUIDE.md\");\n    process.exit(1);\n  }\n}\n\ntestDatabaseConnection();